<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Roman Cipher Tool</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    textarea { width: 100%; height: 100px; }
    select, button, input { margin-top: 10px; }
  </style>
</head>
<body>

<h2>Roman (Caesar) Cipher</h2>
<textarea id="inputText" placeholder="Enter your text here..."></textarea>
<br>
<select id="mode">
  <option value="encrypt">Encrypt</option>
  <option value="decrypt">Decrypt</option>
  <option value="bruteforce">Bruteforce Crack</option>
  <option value="autocrack">AutoCrack</option>
</select>
<br>
<input type="number" id="key" placeholder="Key (for Encrypt/Decrypt)" />
<br>
<button onclick="runCipher()">Run</button>
<h3>Result:</h3>
<pre id="output"></pre>

<script>
function caesarShift(text, shift) {
  return text.split('').map(char => {
    const code = char.charCodeAt(0);
    if (char >= 'A' && char <= 'Z') {
      return String.fromCharCode((code - 65 + shift + 26) % 26 + 65);
    }
    if (char >= 'a' && char <= 'z') {
      return String.fromCharCode((code - 97 + shift + 26) % 26 + 97);
    }
    return char;
  }).join('');
}

function runCipher() {
  const text = document.getElementById("inputText").value;
  const mode = document.getElementById("mode").value;
  const keyInput = document.getElementById("key").value;
  let output = "";

  if (mode === "encrypt") {
    const key = parseInt(keyInput) || 0;
    output = caesarShift(text, key);
  } else if (mode === "decrypt") {
    const key = parseInt(keyInput) || 0;
    output = caesarShift(text, -key);
  } else if (mode === "bruteforce") {
    for (let i = 1; i < 26; i++) {
      output += `Key ${i}: ${caesarShift(text, -i)}\n`;
    }
  } else if (mode === "autocrack") {
    const commonWords = ["the", "be", "to", "of", "and", "in", "that", "have", "I"];
    for (let i = 1; i < 26; i++) {
      const candidate = caesarShift(text, -i).toLowerCase();
      if (commonWords.some(word => candidate.includes(word))) {
        output = `Likely Key ${i}: ${caesarShift(text, -i)}`;
        break;
      }
    }
    if (output === "") output = "AutoCrack failed to detect a valid message.";
  }

  document.getElementById("output").textContent = output;
}
</script>

</body>
</html>